<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mobile authentication</title>
    <style>
        *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  .section {
    position: fixed;
    z-index: -1;
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .section h1 {
    text-align: center;
    font-size: 6rem;
    font-family: "sans-serif";
    padding: 20px;
    margin: 15px;
    z-index: 1;
    opacity: 1;
    color: #fff;
  }

  .video-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
  }

  .color-overlay {
    position: fixed;
    top: 0;
    left: 0;
    background-color: rgb(0, 31, 47);
    width: 100%;
    height: 100vh;
    opacity: 0.7;
  }

  .login-container{
    width: 420px;
    min-height: 480px;
    background: rgba(0, 0, 0, 0.4);
    border-radius: 10px;
    margin: 10em auto;
    display: flex;
    flex-direction: column;
    padding: 3em 0;
}

  .apptitle{
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      font-size: 1.1rem;
      text-align: center;
      margin: 10px;
      margin-bottom: 3em;
      color: #fff;
  }

  form{
      display: flex;
      /* flex-direction: column; */
      /* justify-content: center; */
      align-items: center;
      margin: 10px;

  }

  input{
      padding: 10px 20px;
      font-size: 1.3rem;
      font-family: sans-serif;
      border: none;
      border-radius: 5px;
      outline: none;
      margin: 10px;
  }

  button{
      border: none;
      border-radius: 3px;
      padding: 10px 20px;
      font-size: 1.1rem;
      margin: 0 auto;
      background: green;
      color: #fff;
  }
    </style>
</head>
<body>
    <div class="section">
        <div class="video-container">
          <div class="color-overlay"></div>
          <video id="video" autoplay loop muted playBackRate=4>
            <source src="production ID_4818978.mp4" type="video/mp4" />
          </video>
        </div>
      </div>
      
      <div class="login-container">
          <h3 class="apptitle">Mobile authentication</h1>
          <form action="">
              <input type="text" name="mobile" id="mobilenumber" placeholder="Enter the mobile number">
              <div id="recaptcha-container"></div>
              <button type="button" id="sign-in-button" onclick="send_data()">send otp</button>
          </form>
            
          <form action="">
              <input type="text" name="verifyotp" id="getotp" placeholder="Enter the verification code">
              <button type="button" id="verifymobile" onclick="codeVerify()">verify</button>
        </form>
      </div>

    <!-- email verification -->
    <form action="">
        <!-- <input type="email" name="emailverification" id="email"> -->
        <button type="button" onclick="sendmail()">send verification code</button>
    </form>

<script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-auth.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDlnVyvwidNZRwoK3LrjIVY8vLuVsgzHWE",
    authDomain: "scenic-healer-285106.firebaseapp.com",
    projectId: "scenic-healer-285106",
    storageBucket: "scenic-healer-285106.appspot.com",
    messagingSenderId: "174602061790",
    appId: "1:174602061790:web:241bc1eb076b474815ff4f",
    measurementId: "G-RG1H6EGQWW"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
<script src="ajax.js"></script>
<script src="script.js"></script>
<!--<script>
    window.onload=()=>{
        render();
    }

    function render(){
        window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container',{
            'size': 'invisible',
            'callback':function(response){
                console.log('callback');
            }
        });
        recaptchaVerifier.render();
    }

    function codeAuth(){
        var number=document.getElementById('mobilenumber').value;
        firebase.auth().signInWithPhoneNumber(number, window.recaptchaVerifier).then(function(confirmationResult){
            window.confirmationResult=confirmationResult;
            coderesult=confirmationResult;
            console.log(coderesult);
            alert('message sent');
        }).catch(function (error){
            console.log(error.message);
            alert(erroe.message);
        });
    }

    function codeVerify(){
        var code=document.getElementById('getotp').value;
        coderesult.confirm(code).then(function (result){
            console.log(result.user);
            alert('successfully registered');
        }).catch(function (error){
            console.log(error.message);
            alert(erroe.message);
        });
    }

    
    function sendmail(){
        var emailAddress = document.getElementById('email').value;
        var actionCodeSettings = {
      url: 'http://localhost:8080/success',
      handleCodeInApp: true
        }
    firebase.auth().sendSignInLinkToEmail(emailAddress, actionCodeSettings)
  .then(function() {
    // The link was successfully sent. Inform the user.
    // Save the email locally so you don't need to ask the user for it again
    // if they open the link on the same device.
    alert('email sent');
    window.localStorage.setItem('emailForSignIn', email);
  })
  .catch(function(error) {
    // Some error occurred, you can inspect the code: error.code
    alert(error.message);
  });
    }
</script> -->
<!-- <script>


function getPhoneNumberFromUserInput(){
    var number=document.getElementById('mobilenumber').value;
    return number;
}

    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('sign-in-button', {
  'size': 'invisible',
  'callback': function(response) {
    // reCAPTCHA solved, allow signInWithPhoneNumber.
    console.log('respnse given');
    onSignInSubmit();
  }
});

    console.log('called');
    var phoneNumber = getPhoneNumberFromUserInput();
var appVerifier = window.recaptchaVerifier;
firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
    .then(function (confirmationResult) {
      // SMS sent. Prompt user to type the code from the message, then sign the
      // user in with confirmationResult.confirm(code).
      console.log('sms sent');
      window.confirmationResult = confirmationResult;
      console.log(confirmationResult);
    }).catch(function (error) {
      // Error; SMS not sent
      // ...
      alert('sms not sent');
    });

</script> -->
</body>
</html>